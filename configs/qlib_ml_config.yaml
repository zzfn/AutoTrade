# Qlib ML 策略配置

# 数据获取配置
data:
  # 股票池
  symbols:
    - SPY
    - QQQ
    - AAPL
    - MSFT
    - GOOGL
    - AMZN
    - META
    - NVDA
    - TSLA

  # 数据频率：1min, 1h, 1d (Alpaca 只支持这三种)
  interval: 1min

  # 数据源优先级: alpaca > yfinance
  data_dir: datasets

  # 历史K线数量（数据点数量）
  num_bars: 20000  # 20000 根K线（1min ≈ 14 天，5min ≈ 70 天）
  valid_bars: 2000

  # 策略回看周期（数据点数量）
  lookback_period: 300

# 特征工程配置
features:
  # 滚动窗口大小
  window_sizes:
    - 5
    - 10
    - 20
    - 30
    - 60

  # 是否包含原始 OHLCV 特征
  include_raw: true

  # 是否标准化
  normalize: true

  # 缺失值处理方法: ffill, bfill, zero, mean
  fill_method: ffill

# 模型训练配置
model:
  # 模型类型
  type: lightgbm

  # 模型名称前缀
  name: lightgbm

  # LightGBM 参数
  params:
    objective: regression
    metric: mse
    boosting_type: gbdt
    num_leaves: 31
    learning_rate: 0.05
    feature_fraction: 0.8
    bagging_fraction: 0.8
    bagging_freq: 5
    verbose: -1
    n_jobs: -1
    seed: 42

  # 训练参数
  num_boost_round: 500
  early_stopping_rounds: 50

  # 目标变量
  target_horizon: 60 # 预测未来 60 * 1min = 60 分钟收益

# 策略配置
strategy:
  # 策略类型（固定为 ML 策略）
  type: qlib_ml

  # ML 策略参数
  ml:
    # 持仓股票数量
    top_k: 3

    # 交易间隔
    sleeptime: "1M"
